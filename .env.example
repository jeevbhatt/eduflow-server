# EduFlow Server Environment Variables

# Server Configuration
PORT=4000
NODE_ENV=development

# ============================================
# DATABASE CONFIGURATION - SUPABASE (Prisma)
# ============================================
# Get these from: Supabase Dashboard > Project Settings > Database

# DATABASE_URL - For Prisma Client (Runtime Queries)
# Uses Supavisor connection pooling (port 6543) for better performance
# Format: postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres?pgbouncer=true
DATABASE_URL="postgresql://postgres.[YOUR-PROJECT-REF]:[YOUR-PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres?pgbouncer=true"

# DIRECT_URL - For Prisma CLI (Migrations & Introspection)
# Uses direct connection (port 5432) - required for DDL operations
# Format: postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:5432/postgres
DIRECT_URL="postgresql://postgres.[YOUR-PROJECT-REF]:[YOUR-PASSWORD]@aws-0-[REGION].pooler.supabase.com:5432/postgres"

# ============================================
# LEGACY DATABASE CONFIGURATION (MySQL/Sequelize)
# Keep these if running in hybrid mode during migration
# ============================================
DB_NAME=project2
DB_USERNAME=root
DB_PASSWORD=1234
DB_HOST=localhost
DB_PORT=3306

# JWT Configuration
# SECURITY: Must be at least 32 characters, use a cryptographically random string
# Generate one with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-jwt-secret-key-here-minimum-32-characters
JWT_REFRESH_SECRET=your-refresh-secret-key-here-minimum-32-characters
# Access token: 15m (short-lived), Refresh token: 7d (handled in code)


# Frontend URLs
BASE_URL=http://localhost:3000
FRONTEND_URL=http://localhost:3000

# OAuth - Google
# Get these from https://console.cloud.google.com/
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:4000/api/auth/google/callback

# OAuth - Microsoft
# Get these from https://portal.azure.com/
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
MICROSOFT_CALLBACK_URL=http://localhost:4000/api/auth/microsoft/callback

# Google Sheets Integration
# Get these from https://console.cloud.google.com/ (enable Sheets API)
GOOGLE_SHEETS_CLIENT_ID=your-sheets-client-id
GOOGLE_SHEETS_CLIENT_SECRET=your-sheets-client-secret
GOOGLE_SHEETS_REDIRECT_URI=http://localhost:3000/api/integration/google-sheets/callback

# Google Meet Integration
# Uses Google Calendar API
GOOGLE_MEET_CLIENT_ID=your-meet-client-id
GOOGLE_MEET_CLIENT_SECRET=your-meet-client-secret
GOOGLE_MEET_REDIRECT_URI=http://localhost:3000/api/integration/google-meet/callback

# Notion Integration
NOTION_CLIENT_ID=your-notion-client-id
NOTION_CLIENT_SECRET=your-notion-client-secret
NOTION_REDIRECT_URI=http://localhost:3000/api/integration/notion/callback

# File Upload Configuration
UPLOAD_DIR=uploads
MAX_FILE_SIZE=5242880

# Cloudinary Configuration (File Storage)
# Get these from: https://console.cloudinary.com/
CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=your-api-key
CLOUDINARY_API_SECRET=your-api-secret
CLOUDINARY_UPLOAD_FOLDER=uploads

# Payment Gateways
# Stripe
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# Khalti
KHALTI_SECRET_KEY=your-khalti-secret-key

# eSewa
ESEWA_MERCHANT_ID=EPAYTEST
ESEWA_SECRET_KEY=8gBm/:&EnhH.1/q
# Use actual production URL in real deployment if needed, usually managed via NODE_ENV logic in code
# Required for server-side Firebase Storage (used for file uploads).
# Service Account details: set these from your Firebase project Service Account JSON.
# IMPORTANT: Replace newlines in the private key with "\n" and wrap the value in quotes.
# Example private key format:
# FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_CONTENTS_WITH_ESCAPED_NEWLINES\n-----END PRIVATE KEY-----\n"
FIREBASE_STORAGE_BUCKET=your-project-id.appspot.com

# Email Configuration (Resend)
# Get your API key from: https://resend.com/api-keys
RESEND_API_KEY=re_xxxxxxxxxx
RESEND_FROM_EMAIL=EduFlow <noreply@eduflow.jeevanbhatt.com.np>

# Monitoring (optional in development, required in production)
SENTRY_DSN=your-sentry-dsn
POSTHOG_API_KEY=your-posthog-key

# Data Encryption (required in production)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
DATA_ENCRYPTION_KEY=your-32-character-encryption-key
CRYPTO_SECRET=your-32-character-payment-encryption-key

# Background Jobs
ENABLE_SCHEDULER=false

# ============================================
# SECURITY & RATE LIMITING CONFIGURATION
# ============================================
SECURITY_SUPER_ADMIN_EMAIL=
HONEYPOT_TRAP_PATHS=/wp-admin,/.env,/xmlrpc.php,/config.php,/admin.php

# Rate Limiting (Values in ms)
RATE_LIMIT_LOGIN_WINDOW_MS=3600000
RATE_LIMIT_LOGIN_MAX=10
RATE_LIMIT_REGISTER_WINDOW_MS=3600000
RATE_LIMIT_REGISTER_MAX=3
RATE_LIMIT_EMAIL_RESEND_WINDOW_MS=900000
RATE_LIMIT_EMAIL_RESEND_MAX=5
RATE_LIMIT_PAYMENT_WINDOW_MS=3600000
RATE_LIMIT_PAYMENT_MAX=15

